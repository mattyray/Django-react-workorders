===== Dockerfile =====
# Use official Python image as base
FROM python:3.10.4-slim-bullseye

# Set environment variables
ENV PIP_DISABLE_PIP_VERSION_CHECK=1
ENV PYTHONDONTWRITEBYTECODE=1
ENV PYTHONUNBUFFERED=1

# Set work directory
WORKDIR /code

# Install Python dependencies
COPY ./requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# Copy project files
COPY . .

# Run Gunicorn (production use)
CMD ["sh", "-c", "gunicorn django_project.wsgi --bind 0.0.0.0:${PORT:-8000}"]

===== docker-compose.yml =====
services:
  web:
    build:
      context: .  # üëà ONLY backend is built
    working_dir: /code/backend    # üëà Set working dir to /code
    command: python manage.py runserver 0.0.0.0:8002
    ports:
      - "8002:8002"
    depends_on:
      db:
        condition: service_healthy
    environment:
      - "DJANGO_DEBUG=True"
      - "DJANGO_SECURE_SSL_REDIRECT=False"
      - "DJANGO_SECURE_HSTS_SECONDS=0"
      - "DJANGO_SECURE_HSTS_INCLUDE_SUBDOMAINS=False"
      - "DJANGO_SECURE_HSTS_PRELOAD=False"
      - "DJANGO_SESSION_COOKIE_SECURE=False"
      - "DJANGO_CSRF_COOKIE_SECURE=False"
      - "DATABASE_URL=postgresql://postgres:postgres@db:5432/art_moving"
    volumes:
      - .:/code   # üëà Mount only the backend
    networks:
      - art_moving_network


  db:
    image: postgres:15
    container_name: art_moving_react_db
    restart: always
    volumes:
      - postgres_data:/var/lib/postgresql/data/
    environment:
      POSTGRES_DB: art_moving
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U postgres"]
      interval: 5s
      retries: 5
    networks:
      - art_moving_network

volumes:
  postgres_data:

networks:
  art_moving_network:

===== docker-compose-prod.yml =====
services:
  web:
    build: .
    command: gunicorn django_project.wsgi --bind 0.0.0.0:$PORT
    ports:
      - "8000:8000"
    depends_on:
      db:
        condition: service_healthy
    environment:
      - "DJANGO_DEBUG=False"
      - "DJANGO_SECURE_SSL_REDIRECT=True"
      - "DJANGO_SECURE_HSTS_SECONDS=2592000"  # 30 days
      - "DJANGO_SECURE_HSTS_INCLUDE_SUBDOMAINS=True"
      - "DJANGO_SECURE_HSTS_PRELOAD=True"
      - "DJANGO_SESSION_COOKIE_SECURE=True"
      - "DJANGO_CSRF_COOKIE_SECURE=True"
      - "PORT=8000"  # Needed for Heroku
      - "DATABASE_URL=${DATABASE_URL}"
  db:
    image: postgres:15
    volumes:
      - postgres_data:/var/lib/postgresql/data
    environment:
      - POSTGRES_HOST_AUTH_METHOD=trust
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U postgres"]
      interval: 10s
      retries: 5
      timeout: 5s

volumes:
  postgres_data:

===== heroku.yml =====
build:
  docker:
    web: Dockerfile  # Tells Heroku to use the Dockerfile to build your app

release:
  image: web
  command:
    - python manage.py migrate  # Runs database migrations
    - python manage.py collectstatic --noinput  # Collects static files

run:
  web: gunicorn django_project.wsgi --bind 0.0.0.0:$PORT  # Starts the app

===== requirements.txt =====
asgiref==3.8.1
Django==5.1.6
django-crispy-forms==2.4
django-environ==0.12.0
djangorestframework==3.15.1
django-cors-headers==4.3.1
gunicorn==23.0.0
psycopg2-binary==2.9.10
sqlparse==0.5.3
whitenoise==6.9.0

===== backend/manage.py =====
#!/usr/bin/env python
"""Django's command-line utility for administrative tasks."""
import os
import sys


def main():
    """Run administrative tasks."""
    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'django_project.settings')
    try:
        from django.core.management import execute_from_command_line
    except ImportError as exc:
        raise ImportError(
            "Couldn't import Django. Are you sure it's installed and "
            "available on your PYTHONPATH environment variable? Did you "
            "forget to activate a virtual environment?"
        ) from exc
    execute_from_command_line(sys.argv)


if __name__ == '__main__':
    main()

===== backend/django_project/asgi.py =====
"""
ASGI config for django_project project.

It exposes the ASGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/5.1/howto/deployment/asgi/
"""

import os

from django.core.asgi import get_asgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'django_project.settings')

application = get_asgi_application()

===== backend/django_project/wsgi.py =====
"""
WSGI config for django_project project.

It exposes the WSGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/5.1/howto/deployment/wsgi/
"""

import os

from django.core.wsgi import get_wsgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'django_project.settings')

application = get_wsgi_application()

===== backend/django_project/settings.py =====
from environ import Env
from pathlib import Path
import os

# Initialize environment variables
env = Env()
Env.read_env()

# Base directory
BASE_DIR = Path(__file__).resolve().parent.parent

# ‚úÖ Security settings
SECURE_PROXY_SSL_HEADER = ("HTTP_X_FORWARDED_PROTO", "https")  # Required for Heroku

# Secret Key & Debug Mode
SECRET_KEY = env("DJANGO_SECRET_KEY", default="No Secret Key Found")
DEBUG = env.bool("DJANGO_DEBUG", default=False)

# ‚úÖ Allowed Hosts
ALLOWED_HOSTS = env.list("DJANGO_ALLOWED_HOSTS", default=[
    "localhost",
    "127.0.0.1",
    "0.0.0.0",
])

# ‚úÖ Installed Apps
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',

    # Custom apps
    'workorders',

    # Third-party packages
    "rest_framework",
    "corsheaders",

]

# ‚úÖ Middleware
MIDDLEWARE = [
    "corsheaders.middleware.CorsMiddleware",  # üõë Put CORS middleware at the top!
    'django.middleware.security.SecurityMiddleware',
    'whitenoise.middleware.WhiteNoiseMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

# ‚úÖ URL Configuration
ROOT_URLCONF = 'django_project.urls'

# ‚úÖ Templates
TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [],  # Include custom templates
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

# ‚úÖ WSGI Application
WSGI_APPLICATION = 'django_project.wsgi.application'

# ‚úÖ Database Configuration
DATABASES = {
    "default": env.db_url("DATABASE_URL")
}



# ‚úÖ Password Validation
AUTH_PASSWORD_VALIDATORS = [
    {'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator'},
    {'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator'},
    {'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator'},
    {'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator'},
]

# ‚úÖ Localization
LANGUAGE_CODE = 'en-us'
TIME_ZONE = 'UTC'
USE_I18N = True
USE_TZ = True

STATIC_URL = "/static/"
STATICFILES_DIRS = [BASE_DIR / "static"]  # üëà crucial for collectstatic to find non-app static files
STATIC_ROOT = BASE_DIR / "staticfiles"
STATICFILES_STORAGE = "whitenoise.storage.CompressedManifestStaticFilesStorage"


MEDIA_URL = "/media/"
MEDIA_ROOT = BASE_DIR / "media"

# ‚úÖ Default Primary Key
DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'

# ‚úÖ Crispy Forms
CRISPY_ALLOWED_TEMPLATE_PACKS = "bootstrap5"
CRISPY_TEMPLATE_PACK = "bootstrap5"

# ‚úÖ Login & Logout
LOGIN_REDIRECT_URL = 'home'
LOGOUT_REDIRECT_URL = "/"  

# ‚úÖ Security Settings for Production
if not DEBUG:
    SECURE_SSL_REDIRECT = env.bool("DJANGO_SECURE_SSL_REDIRECT", default=True)
    SECURE_HSTS_SECONDS = env.int("DJANGO_SECURE_HSTS_SECONDS", default=2592000)  # 30 days
    SECURE_HSTS_INCLUDE_SUBDOMAINS = env.bool("DJANGO_SECURE_HSTS_INCLUDE_SUBDOMAINS", default=True)
    SECURE_HSTS_PRELOAD = env.bool("DJANGO_SECURE_HSTS_PRELOAD", default=True)
    SESSION_COOKIE_SECURE = env.bool("DJANGO_SESSION_COOKIE_SECURE", default=True)
    CSRF_COOKIE_SECURE = env.bool("DJANGO_CSRF_COOKIE_SECURE", default=True)
else:
    SECURE_SSL_REDIRECT = False
    SECURE_HSTS_SECONDS = 0
    SECURE_HSTS_INCLUDE_SUBDOMAINS = False
    SECURE_HSTS_PRELOAD = False
    SESSION_COOKIE_SECURE = False
    CSRF_COOKIE_SECURE = False


STATICFILES_FINDERS = [
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
]

CORS_ALLOW_ALL_ORIGINS = True  # üëà For development only

===== backend/django_project/urls.py =====
from django.contrib import admin
from django.urls import path, include
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    path("admin/", admin.site.urls),
    path("api/workorders/", include("workorders.urls")),  # Our main API routes
]

if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)

===== backend/workorders/models.py =====
from django.db import models
from django.conf import settings

class WorkOrder(models.Model):
    STATUS_CHOICES = [
        ('pending', 'Pending'),
        ('in_progress', 'In Progress'),
        ('completed', 'Completed'),
    ]
    client_name = models.CharField(max_length=255, blank=True)  # Changed from FK to charfield
    job_description = models.TextField(blank=True, null=True)
    estimated_cost = models.DecimalField(
        max_digits=10,
        decimal_places=2,
        blank=True,
        null=True
    )
    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='pending')
    completed_at = models.DateTimeField(blank=True, null=True)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    def __str__(self):
        return f"WorkOrder #{self.id} for {self.client_name}"

    def update_status(self):
        if self.status == 'completed':
            return
        if self.events.filter(date__isnull=False).exists():
            self.status = 'in_progress'
        else:
            self.status = 'pending'
        # Optional:
        # self.save()



class JobAttachment(models.Model):
    work_order = models.ForeignKey(WorkOrder, on_delete=models.CASCADE, related_name='attachments')
    file = models.FileField(upload_to='job_attachments/')
    uploaded_at = models.DateTimeField(auto_now_add=True)

    def __str__(self):
        return f"Attachment {self.id} for WorkOrder {self.work_order.id}"


class JobNote(models.Model):
    work_order = models.ForeignKey(WorkOrder, on_delete=models.CASCADE, related_name='notes')
    note = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)

    def __str__(self):
        return f"Note {self.id} for WorkOrder {self.work_order.id}"
    

class Event(models.Model):
    EVENT_TYPES = [
        ('pickup', 'Pickup'),
        ('pickup_wrap', 'Pickup and Wrap'),
        ('wrap', 'Wrap'),
        ('install', 'Install'),
        ('deliver_install', 'Deliver and Install'),
        ('dropoff', 'Drop Off'),
    ]
    work_order = models.ForeignKey(WorkOrder, on_delete=models.CASCADE, related_name='events')
    event_type = models.CharField(max_length=30, choices=EVENT_TYPES)
    address = models.CharField(max_length=255, blank=True)
    date = models.DateField(blank=True, null=True)

    def __str__(self):
        return f"{self.get_event_type_display()} for WorkOrder #{self.work_order.id}"
===== backend/workorders/serializers.py =====
from rest_framework import serializers
from .models import WorkOrder, Event, JobAttachment, JobNote

class EventSerializer(serializers.ModelSerializer):
    class Meta:
        model = Event
        fields = '__all__'

class JobAttachmentSerializer(serializers.ModelSerializer):
    class Meta:
        model = JobAttachment
        fields = '__all__'

class JobNoteSerializer(serializers.ModelSerializer):
    class Meta:
        model = JobNote
        fields = '__all__'

class WorkOrderSerializer(serializers.ModelSerializer):
    events = EventSerializer(many=True, read_only=True)
    attachments = JobAttachmentSerializer(many=True, read_only=True)
    notes = JobNoteSerializer(many=True, read_only=True)

    class Meta:
        model = WorkOrder
        fields = '__all__'
        read_only_fields = ['id', 'created_at', 'updated_at']

    def create(self, validated_data):
        events_data = validated_data.pop('events', [])
        workorder = WorkOrder.objects.create(**validated_data)
        for event_data in events_data:
            Event.objects.create(work_order=workorder, **event_data)
        return workorder

===== backend/workorders/views.py =====
from rest_framework import generics
from .models import WorkOrder
from .serializers import WorkOrderSerializer

class WorkOrderListCreateView(generics.ListCreateAPIView):
    queryset = WorkOrder.objects.all()
    serializer_class = WorkOrderSerializer

class WorkOrderRetrieveUpdateDestroyView(generics.RetrieveUpdateDestroyAPIView):
    queryset = WorkOrder.objects.all()
    serializer_class = WorkOrderSerializer

===== backend/workorders/urls.py =====
from django.urls import path
from .views import WorkOrderListCreateView, WorkOrderRetrieveUpdateDestroyView

urlpatterns = [
    path('', WorkOrderListCreateView.as_view(), name='workorder-list-create'),
    path('<int:pk>/', WorkOrderRetrieveUpdateDestroyView.as_view(), name='workorder-detail'),
]

===== backend/workorders/admin.py =====
from django.contrib import admin
from .models import WorkOrder, Event, JobAttachment, JobNote

class EventInline(admin.TabularInline):
    model = Event
    extra = 1  # Number of extra empty forms

class WorkOrderAdmin(admin.ModelAdmin):
    inlines = [EventInline]
    list_display = ['id', 'client_name', 'job_description', 'status']
    search_fields = ['client__name', 'job_description']
    list_filter = ['status', 'created_at', 'updated_at']

admin.site.register(WorkOrder, WorkOrderAdmin)
admin.site.register(JobAttachment)
admin.site.register(JobNote)

===== frontend/package.json =====
{
  "name": "frontend",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "axios": "^1.9.0",
    "react": "^19.0.0",
    "react-dom": "^19.0.0"
  },
  "devDependencies": {
    "@eslint/js": "^9.22.0",
    "@tailwindcss/postcss": "^4.1.5",
    "@tailwindcss/vite": "^4.1.5",
    "@types/react": "^19.0.10",
    "@types/react-dom": "^19.0.4",
    "@vitejs/plugin-react": "^4.3.4",
    "autoprefixer": "^10.4.21",
    "eslint": "^9.22.0",
    "eslint-plugin-react-hooks": "^5.2.0",
    "eslint-plugin-react-refresh": "^0.4.19",
    "globals": "^16.0.0",
    "postcss": "^8.5.3",
    "tailwindcss": "^4.1.5",
    "vite": "^6.3.1"
  }
}

===== frontend/vite.config.js =====
// frontend/vite.config.js
import { defineConfig } from 'vite'
import react             from '@vitejs/plugin-react'
import tailwindcss       from '@tailwindcss/vite'

export default defineConfig({
  plugins: [
    react(),
    tailwindcss(),    // ‚Üê our new Tailwind plugin for Vite
  ],
})

===== frontend/index.html =====
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + React</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>

===== frontend/src/App.jsx =====
import React        from 'react';
import AppRouter    from './Router.jsx';

export default function App() {
  return <AppRouter />;
}

===== frontend/src/Router.jsx =====
import React from 'react';
import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';
import Home       from './pages/Home.jsx';
import WorkOrders from './pages/WorkOrders.jsx';
import Navbar     from './components/Navbar.jsx';
import Footer     from './components/Footer.jsx';

export default function AppRouter() {
  return (
    <Router>
      <div className="flex flex-col min-h-screen">
        <Navbar />
        <main className="flex-1">
          <Routes>
            <Route path="/" element={<Home />} />
            <Route path="/workorders" element={<WorkOrders />} />
          </Routes>
        </main>
        <Footer />
      </div>
    </Router>
  );
}

===== frontend/src/main.jsx =====
import React, { StrictMode } from 'react';
import { createRoot }      from 'react-dom/client';
import './index.css';
import App                 from './App.jsx';

createRoot(document.getElementById('root')).render(
  <StrictMode>
    <App />
  </StrictMode>
);

===== frontend/src/index.css =====
@import "tailwindcss";

===== frontend/src/App.css =====
#root {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}

===== frontend/src/components/EventForm.jsx =====
import { useState } from 'react';

function EventForm({ workOrderId, onEventAdded }) {
  const [eventType, setEventType] = useState('pickup');
  const [address, setAddress] = useState('');
  const [date, setDate] = useState('');

  const handleSubmit = (e) => {
    e.preventDefault();
    if (!address || !date) return;

    onEventAdded(workOrderId, {
      event_type: eventType,
      address,
      date,
    });

    // Reset
    setEventType('pickup');
    setAddress('');
    setDate('');
  };

  return (
    <form onSubmit={handleSubmit} style={{ marginTop: '1rem' }}>
      <h5 style={{ marginBottom: '0.5rem' }}>Add Event</h5>
      <div>
        <label>Type</label><br />
        <select value={eventType} onChange={(e) => setEventType(e.target.value)}>
          <option value="pickup">Pickup</option>
          <option value="install">Install</option>
          <option value="dropoff">Dropoff</option>
          <option value="wrap">Wrap</option>
        </select>
      </div>
      <div>
        <label>Address</label><br />
        <input
          type="text"
          value={address}
          onChange={(e) => setAddress(e.target.value)}
          required
        />
      </div>
      <div>
        <label>Date</label><br />
        <input
          type="date"
          value={date}
          onChange={(e) => setDate(e.target.value)}
          required
        />
      </div>
      <button type="submit" style={{ marginTop: "0.5rem" }}>
        Add
      </button>
    </form>
  );
}

export default EventForm;

===== frontend/src/components/Footer.jsx =====
function Footer() {
    const footerWrapperStyle = {
      background: "#1a1a1a",
      padding: "1rem 0",
      color: "white",
      textAlign: "center",
    };
  
    const containerStyle = {
      maxWidth: '1200px',
      margin: '0 auto',
      padding: '0 2rem',
    };
  
    return (
      <footer style={footerWrapperStyle}>
        <div style={containerStyle}>
          ¬© 2025 Work Orders App
        </div>
      </footer>
    );
  }
  
  export default Footer;
  
===== frontend/src/components/Navbar.jsx =====
import { Link, useLocation } from 'react-router-dom';

function Navbar() {
  const location = useLocation();

  const navWrapperStyle = {
    backgroundColor: '#1a1a1a',
    padding: '1rem 0',   // <-- no side padding here
  };

  const containerStyle = {
    maxWidth: '1200px',
    margin: '0 auto',
    padding: '0 2rem',  // <-- now inside container
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'space-between',
    color: 'white',
    fontFamily: 'Arial, sans-serif',
  };

  const linkStyle = {
    color: 'white',
    textDecoration: 'none',
    marginLeft: '1rem',
    fontWeight: 'bold',
    fontSize: '1rem',
    paddingBottom: '2px',
    borderBottom: '2px solid transparent',
  };

  const activeLinkStyle = {
    ...linkStyle,
    borderBottom: '2px solid #4CAF50',
  };

  return (
    <nav style={navWrapperStyle}>
      <div style={containerStyle}>
        <div style={{ fontWeight: 'bold', fontSize: '1.5rem' }}>
          WorkOrdersApp
        </div>
        <div>
          <Link
            to="/"
            style={location.pathname === '/' ? activeLinkStyle : linkStyle}
          >
            Home
          </Link>
          <Link
            to="/workorders"
            style={location.pathname === '/workorders' ? activeLinkStyle : linkStyle}
          >
            Work Orders
          </Link>
        </div>
      </div>
    </nav>
  );
}

export default Navbar;

===== frontend/src/components/WorkOrderForm.jsx =====
import { useState } from 'react';

function WorkOrderForm({ onAddWorkOrder }) {
  const [clientName, setClientName] = useState('');
  const [jobDescription, setJobDescription] = useState('');
  const [status, setStatus] = useState('pending');

  const handleSubmit = (e) => {
    e.preventDefault();

    const newOrder = {
      client_name: clientName,
      job_description: jobDescription,
      status: status,
    };

    onAddWorkOrder(newOrder);

    // Clear the form
    setClientName('');
    setJobDescription('');
    setStatus('pending');
  };

  return (
    <form onSubmit={handleSubmit} style={{ marginBottom: '2rem', textAlign: 'left', maxWidth: '600px', marginInline: 'auto' }}>
      <h2 style={{ textAlign: 'center', marginBottom: '1rem' }}>Add New Work Order</h2>

      <div style={{ marginBottom: '1rem' }}>
        <label>Client Name</label>
        <input
          type="text"
          value={clientName}
          onChange={(e) => setClientName(e.target.value)}
          required
          style={{ width: '100%', padding: '0.5rem', marginTop: '0.5rem' }}
        />
      </div>

      <div style={{ marginBottom: '1rem' }}>
        <label>Job Description</label>
        <textarea
          value={jobDescription}
          onChange={(e) => setJobDescription(e.target.value)}
          required
          style={{ width: '100%', padding: '0.5rem', marginTop: '0.5rem', minHeight: '100px' }}
        />
      </div>

      <div style={{ marginBottom: '1rem' }}>
        <label>Status</label>
        <select
          value={status}
          onChange={(e) => setStatus(e.target.value)}
          style={{ width: '100%', padding: '0.5rem', marginTop: '0.5rem' }}
        >
          <option value="pending">Pending</option>
          <option value="in_progress">In Progress</option>
          <option value="completed">Completed</option>
        </select>
      </div>

      <button
        type="submit"
        style={{
          backgroundColor: '#4CAF50',
          color: 'white',
          padding: '0.75rem 1.5rem',
          border: 'none',
          borderRadius: '4px',
          cursor: 'pointer',
          width: '100%',
          fontSize: '1rem',
        }}
      >
        Add Work Order
      </button>
    </form>
  );
}

export default WorkOrderForm;

===== frontend/src/components/WorkOrderList.jsx =====
import EventForm from './EventForm';
import { formatDate } from '../utils/formatDate';

function getEventIcon(type) {
  switch (type) {
    case 'pickup':
      return 'üì¶';
    case 'install':
      return 'üõ†';
    case 'dropoff':
      return 'üìç';
    case 'wrap':
      return 'üéÅ';
    default:
      return 'üìÖ';
  }
}

function WorkOrderList({ workOrders, onAddEvent }) {
  if (workOrders.length === 0) {
    return <p>No work orders available.</p>;
  }

  return (
    <div
      style={{
        display: "grid",
        gridTemplateColumns: "repeat(auto-fit, minmax(300px, 1fr))",
        gap: "1rem",
      }}
    >
      {workOrders.map((order) => (
        <div
          key={order.id}
          style={{
            border: "1px solid #ccc",
            borderRadius: "8px",
            padding: "1rem",
            backgroundColor: "#2a2a2a",
            color: "white",
            textAlign: "left",
          }}
        >
          <h3 style={{ marginBottom: "0.5rem" }}>
            {order.client_name || "Untitled Work Order"}
          </h3>
          <p style={{ marginBottom: "0.5rem" }}>{order.job_description}</p>
          <p style={{ fontSize: "0.9rem", color: "#4CAF50" }}>{order.status}</p>

          {/* Events List */}
          {order.events?.length > 0 && (
            <>
              <h4 style={{ marginTop: "1rem" }}>Scheduled Events:</h4>
              <ul style={{ paddingLeft: "1rem", fontSize: "0.9rem" }}>
                {order.events.map((event, index) => (
                  <li key={index} style={{ marginBottom: "0.5rem" }}>
                    <span style={{ marginRight: "0.5rem" }}>{getEventIcon(event.event_type)}</span>
                    <strong>{event.event_type.replace('_', ' ')}</strong>
                    <br />
                    <span style={{ color: "#bbb" }}>{event.address}</span>
                    <br />
                    <span style={{ fontSize: "0.85rem", color: "#4CAF50" }}>
                      {formatDate(event.date)}
                    </span>
                  </li>
                ))}
              </ul>
            </>
          )}

          {/* Event Form */}
          <EventForm workOrderId={order.id} onEventAdded={onAddEvent} />
        </div>
      ))}
    </div>
  );
}

export default WorkOrderList;

===== frontend/src/pages/Home.jsx =====
import React from 'react';
import { Link } from 'react-router-dom';

export default function Home() {
  return (
    <main className="min-h-screen bg-gradient-to-r from-blue-500 to-indigo-600 text-white">
      <section className="min-h-[70vh] flex flex-col items-center justify-center px-6">
        <h1 className="text-4xl md:text-6xl font-bold mb-4 drop-shadow-lg">
          Streamline Your Work Orders
        </h1>
        <p className="text-lg md:text-2xl mb-8 text-center max-w-2xl">
          Quickly create, schedule, and track every job‚Äîall in one place.
        </p>
        <Link
          to="/workorders"
          className="
            bg-white text-blue-600 font-semibold
            px-6 py-3 rounded-full
            shadow-md hover:shadow-lg
            transition-shadow duration-200
          "
        >
          Get Started
        </Link>
      </section>

      <section className="py-12 bg-gray-50 text-gray-800 dark:bg-gray-800 dark:text-gray-200">
        <div className="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8 px-6">
          <div className="bg-white dark:bg-gray-700 rounded-xl shadow-md p-6 text-center">
            <div className="text-5xl mb-4">üìù</div>
            <h3 className="text-xl font-semibold mb-2">Create Orders</h3>
            <p>Easy form to add new jobs.</p>
          </div>
          <div className="bg-white dark:bg-gray-700 rounded-xl shadow-md p-6 text-center">
            <div className="text-5xl mb-4">üìÖ</div>
            <h3 className="text-xl font-semibold mb-2">Schedule Events</h3>
            <p>Pickups, installs, drop-offs.</p>
          </div>
          <div className="bg-white dark:bg-gray-700 rounded-xl shadow-md p-6 text-center">
            <div className="text-5xl mb-4">üìä</div>
            <h3 className="text-xl font-semibold mb-2">Track Status</h3>
            <p>Always know what‚Äôs in progress.</p>
          </div>
        </div>
      </section>
    </main>
  );
}

===== frontend/src/pages/WorkOrders.jsx =====
import { useState, useEffect } from 'react';
import axios from 'axios';
import WorkOrderList from '../components/WorkOrderList';
import WorkOrderForm from '../components/WorkOrderForm';

function WorkOrders() {
  const [workOrders, setWorkOrders] = useState([]);
  const [loading, setLoading] = useState(true);

  // Fetch work orders on page load
  useEffect(() => {
    fetchWorkOrders();
  }, []);

  const fetchWorkOrders = async () => {
    try {
      const response = await axios.get('http://localhost:8002/api/workorders/');
      setWorkOrders(response.data);
    } catch (error) {
      console.error('Error fetching work orders:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleAddWorkOrder = async (newOrder) => {
    try {
      const response = await axios.post('http://localhost:8002/api/workorders/', newOrder);
      setWorkOrders((prevOrders) => [response.data, ...prevOrders]);
    } catch (error) {
      console.error('Error adding work order:', error);
    }
  };

  const handleAddEvent = async (workOrderId, eventData) => {
    try {
      const response = await axios.post('http://localhost:8002/api/events/', {
        ...eventData,
        work_order: workOrderId,
      });

      // Update the specific work order with the new event
      setWorkOrders((prevOrders) =>
        prevOrders.map((order) =>
          order.id === workOrderId
            ? {
                ...order,
                events: [...(order.events || []), response.data],
              }
            : order
        )
      );
    } catch (error) {
      console.error('Error adding event:', error);
    }
  };

  return (
    <div style={{ padding: "2rem", textAlign: "center" }}>
      <h1>Work Orders Page</h1>
      <p>Manage your upcoming work orders below:</p>

      <WorkOrderForm onAddWorkOrder={handleAddWorkOrder} />

      <div style={{ marginTop: "2rem" }}>
        {loading ? (
          <p>Loading work orders...</p>
        ) : (
          <WorkOrderList workOrders={workOrders} onAddEvent={handleAddEvent} />
        )}
      </div>
    </div>
  );
}

export default WorkOrders;

===== frontend/src/services/api.jsx =====
// src/services/api.js
import axios from 'axios';

const API_BASE = 'http://localhost:8002/api';

export const fetchWorkOrders = () => axios.get(`${API_BASE}/workorders/`);
export const createWorkOrder = (data) => axios.post(`${API_BASE}/workorders/`, data);
export const createEvent = (workOrderId, data) =>
    axios.post(`${API_BASE}/events/`, { ...data, work_order: workOrderId });
  

===== frontend/src/utils/formatDate.js =====
export function formatDate(dateString) {
    const date = new Date(dateString);
    return date.toLocaleDateString(undefined, {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
    });
  }
  